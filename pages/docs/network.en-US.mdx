import Network from 'components/example/network'
import Switch from 'components/example/switch'

# Switch Network

## Get network value and subscribe to changing

```jsx
export default () => {
  const [network, setNetwork] = useState("");

  useEffect(() => {
    const provider = window.ton ?? {};
    if (!provider.isOpenMask) return;

    // Initial chainId value
    provider.send("ton_getChain").then((chainId) => setNetwork(chainId));

    // Subscribe to change network
    provider.on("chainChanged", setNetwork);
    return () => {
      // Unsubscribe
      provider.off("chainChanged", setNetwork);
    };
  }, []);

  return (
    <div>
      <div>{network ?? "OpenMask not detected"}</div>
    </div>
  );
};
```

Please try to change netwrok in your OpenMask extesion:

<Network />

## Ask to change network from dApp

```jsx
export default () => {
  const [network, setNetwork] = useState("");

  const switchNetwork = async () => {
    const provider = window.ton ?? {};
    if (!provider?.isOpenMask) return;

    const next = network === "mainnet" ? "testnet" : "mainnet";
    try {
      await provider.send("wallet_switchChain", next);

      setNetwork(next);
    } catch (e) {
      console.error(e);
    }
  };

  useEffect(() => {
    const provider = window.ton ?? {};
    if (!provider?.isOpenMask) return;

    // Initial chainId value
    provider.send("ton_getChain").then((chainId) => setNetwork(chainId));
  }, []);

  return (
    <div>
      <button onClick={switchNetwork}>
        Switch network
      </button>
      <div>{network ?? "OpenMask not detected"}</div>
    </div>
  );
};

```

<Switch />
